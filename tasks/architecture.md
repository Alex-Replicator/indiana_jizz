# Архитектурное решение

## Общая архитектура
Indiana Jizz представляет собой Docker-сборку, реализующую классическую архитектуру LEMP-стека (Linux, Nginx, MySQL, PHP) с добавлением PHPMyAdmin для удобного управления базой данных. Все компоненты запускаются в отдельных контейнерах, что обеспечивает изоляцию, масштабируемость и переносимость окружения разработки.

## Ключевые компоненты
1. **Nginx (веб-сервер)**
   - Обрабатывает входящие HTTP-запросы
   - Отдаёт статические файлы
   - Проксирует динамические запросы на PHP-FPM
   - Конфигурируется через файлы в директории `services/nginx/`

2. **PHP (язык программирования)**
   - Работает в режиме PHP-FPM
   - Обрабатывает динамические запросы
   - Включает необходимые расширения для работы с MySQL
   - Конфигурируется через файлы в директории `services/php/`

3. **MySQL (СУБД)**
   - Хранение данных приложения
   - Работает в отдельном контейнере с постоянным томом для данных
   - Конфигурируется через файлы в директории `services/mysql/`

4. **PHPMyAdmin**
   - Веб-интерфейс для управления MySQL
   - Доступен через отдельный порт
   - Конфигурируется через файлы в директории `services/phpmyadmin/`

5. **Docker Compose**
   - Оркестрация контейнеров
   - Управление сетями, томами и зависимостями
   - Конфигурируется через файл `docker-compose.yml`

## Технические решения

1. **Монтирование исходного кода**
   - Папка `wsw_site` монтируется в контейнеры Nginx и PHP
   - Изменения в коде немедленно отражаются в работающем приложении без необходимости пересборки контейнеров

2. **Переменные окружения**
   - Все настраиваемые параметры вынесены в файл `.env`
   - Используется переменная `COMPOSE_PROJECT_NAME` для именования контейнеров, сетей и томов

3. **Сетевое взаимодействие**
   - Все контейнеры подключены к внутренней сети Docker
   - Только необходимые порты экспортируются наружу
   - Для внешних портов используются нестандартные значения для избежания конфликтов

4. **Управление данными**
   - Данные MySQL хранятся в томе Docker
   - Код проекта монтируется извне

## Нефункциональные аспекты
- **Производительность**: 
  - Настройка буферов Nginx и PHP-FPM
  - Ограничение ресурсов контейнеров для предотвращения перегрузки хоста
  - Использование соответствующих версий образов для оптимальной производительности

- **Безопасность**: 
  - Изоляция сервисов в отдельных контейнерах
  - Ограничение доступа к базе данных
  - Доступ к PHPMyAdmin только через локальную сеть

- **Масштабируемость**: 
  - Возможность расширения сборки дополнительными сервисами
  - Независимое масштабирование компонентов
  - Легкое обновление версий компонентов 